var Ee=Object.defineProperty;var Ae=(t,s,a)=>s in t?Ee(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var we=(t,s,a)=>Ae(t,typeof s!="symbol"?s+"":s,a);import{D as He,j as e,w as _e,x as Le,U as Ie,r as x,R as $e,E as Re,H as Me,I as Fe,K as Oe,V as Ve,X as je,W as w,Y as Ke,C as ze,c as Te,z as De,h as Be,i as Ye,l as Ue,Z as Ge,n as Je,_ as qe,s as Xe,$ as Qe,a0 as Ze,a1 as We,a2 as es,a3 as ss,a4 as ts,a5 as Pe,a6 as Se,a7 as as,f as ns,k as rs,m as os,a8 as is,a9 as ls,v as cs}from"./index-uI-uAMi1.js";import{e as ds,S as us,f as hs,g as ms,h as xs,d as fs,i as ps,c as gs,b as ys,P as bs,T as js,L as vs}from"./TeamResultComponent-C_xDaZZb.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M5 12h14",key:"1ays0h"}]],ws=He("minus",Ns);function Ss({competition:t,courseName:s,totalParticipants:a,variant:n="footer"}){const c=n==="header"?"bg-rough/30 rounded-xl p-4 border border-soft-grey":"bg-rough/30 border-t border-soft-grey px-4 py-2 flex-shrink-0";return e.jsx("div",{className:c,children:e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-8 text-label-sm text-charcoal font-primary",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(_e,{className:"h-4 w-4 text-turf"}),e.jsx("span",{className:"hidden sm:inline",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),e.jsx("span",{className:"sm:hidden",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Le,{className:"h-4 w-4 text-turf"}),e.jsx("span",{className:"truncate",children:s||"Loading..."})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ie,{className:"h-4 w-4 text-turf"}),e.jsxs("span",{children:[a," participants"]})]})]})})}function Cs({isOpen:t,onClose:s,onSave:a,participant:n}){const[c,h]=x.useState("");x.useEffect(()=>{n&&h(n.currentName||"")},[n]);const p=()=>{if(!n)return;const o=c.trim();o.length!==0&&a(n.id,o)},b=()=>{h((n==null?void 0:n.currentName)||""),s()},g=o=>{o.key==="Enter"?(o.preventDefault(),p()):o.key==="Escape"&&(o.preventDefault(),b())};return n?e.jsx($e,{open:t,onOpenChange:s,children:e.jsxs(Re,{children:[e.jsx(Me,{className:"fixed inset-0 bg-black bg-opacity-50 z-50"}),e.jsx(Fe,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-scorecard rounded-xl p-6 w-full max-w-sm shadow-xl border border-soft-grey max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Oe,{className:"text-lg font-semibold text-fairway font-display",children:"Edit Player Name"}),e.jsx(Ve,{asChild:!0,children:e.jsx("button",{className:"p-2 hover:bg-flag hover:bg-opacity-10 rounded-xl transition-colors","aria-label":"Close",children:e.jsx(je,{className:"h-4 w-4 text-flag"})})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-turf font-primary",children:["Editing position:"," ",e.jsx("span",{className:"font-medium",children:n.positionName})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"player-name",className:"block text-sm font-medium text-charcoal mb-2 font-primary",children:"Player Name"}),e.jsx("input",{id:"player-name",type:"text",value:c,onChange:o=>h(o.target.value),onKeyDown:g,className:"w-full p-3 border-2 border-soft-grey rounded-xl text-charcoal font-primary focus:border-turf focus:bg-rough focus:bg-opacity-20 transition-colors outline-none",placeholder:"Enter player name",autoFocus:!0})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:b,className:"flex-1 p-3 bg-rough bg-opacity-30 text-fairway rounded-xl hover:bg-rough hover:bg-opacity-50 font-medium font-primary transition-colors",children:"Cancel"}),e.jsx("button",{onClick:p,disabled:c.trim().length===0,className:w("flex-1 p-3 rounded-xl font-medium font-primary transition-colors",c.trim().length>0?"bg-turf text-scorecard hover:bg-fairway":"bg-soft-grey text-soft-grey cursor-not-allowed"),children:"Save"})]})]})})]})}):null}function Is({currentHole:t,holePar:s,holeHcp:a,onPrevious:n,onNext:c,canGoPrevious:h,canGoNext:p,className:b}){return e.jsx("div",{className:w("bg-coral text-charcoal px-4 py-2","shadow-lg border-t border-coral/20",b),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:n,disabled:!h,className:w("p-2 rounded-lg transition-all duration-200 touch-manipulation",h?"hover:bg-coral/20 active:bg-coral/30":"opacity-50 cursor-not-allowed"),children:e.jsx(Ke,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-8 text-center",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-label-sm font-medium text-charcoal",children:"Par"}),e.jsx("div",{className:"text-display-sm font-bold text-charcoal font-display",children:s})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-label-sm font-medium text-charcoal",children:"Holes"}),e.jsx("div",{className:"text-display-sm font-bold text-charcoal font-display",children:t})]}),a!==void 0&&e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-label-sm font-medium text-charcoal",children:"SI"}),e.jsx("div",{className:"text-display-sm font-bold text-charcoal font-display",children:a})]})]}),e.jsx("button",{onClick:c,disabled:!p,className:w("p-2 rounded-lg transition-all duration-200 touch-manipulation",p?"hover:bg-coral/20 active:bg-coral/30":"opacity-50 cursor-not-allowed"),children:e.jsx(ze,{className:"w-6 h-6"})})]})})}function Ps({activeTab:t,onTabChange:s,className:a,hiddenTabs:n=[],participantsLabel:c}){const p=[{id:"score",label:"Score Entry",shortLabel:"Score",icon:ds,disabled:!1},{id:"leaderboard",label:"Leaderboard",shortLabel:"Leaderboard",icon:Te,disabled:!1},{id:"teams",label:"Team Results",shortLabel:"Teams",icon:De,disabled:!1},{id:"participants",label:c||"Participants",shortLabel:c||"Groups",icon:Ie,disabled:!1}].filter(g=>!n.includes(g.id)),b=p.length===3?"grid-cols-3":"grid-cols-4";return e.jsx("div",{className:w("bg-scorecard border-t-2 border-soft-grey shadow-[0_-2px_8px_rgba(27,67,50,0.08)]",a),children:e.jsx("div",{className:w("grid max-w-lg mx-auto",b),children:p.map(g=>{const o=t===g.id,u=g.icon;return e.jsxs("button",{onClick:()=>!g.disabled&&s(g.id),disabled:g.disabled,className:w("flex flex-col items-center justify-center py-3 px-2 transition-all duration-200 touch-manipulation","min-h-[60px] md:min-h-[64px] font-['Inter']",o?"text-coral bg-gradient-to-b from-coral/10 to-coral/5 border-t-2 border-coral":"text-charcoal hover:text-turf hover:bg-rough/30",g.disabled&&"opacity-50 cursor-not-allowed"),children:[e.jsx(u,{className:w("mb-1 transition-all duration-200",o?"w-6 h-6":"w-5 h-5","md:w-6 md:h-6")}),e.jsxs("span",{className:w("text-xs font-medium transition-all duration-200","md:text-sm",o&&"font-semibold"),children:[e.jsx("span",{className:"sm:hidden",children:g.shortLabel}),e.jsx("span",{className:"hidden sm:inline",children:g.label})]})]},g.id)})})})}function ks({competitionId:t,teeTimeId:s,selectedParticipantId:a}){const{data:n,isLoading:c}=Be(t?parseInt(t):0),{data:h}=Ye((n==null?void 0:n.course_id)||0),{data:p,refetch:b}=Ue(t?parseInt(t):0),{data:g,isLoading:o,refetch:u}=Ge(t?parseInt(t):0),l=g,{data:v,isLoading:R,refetch:_}=Je(t?parseInt(t):0),{data:B,refetch:d}=qe(s?parseInt(s):0),{data:m}=Xe(a||0),P=Qe();return{competition:n,course:h,teeTimes:p,leaderboard:l,teamLeaderboard:v,teeTime:B,selectedParticipant:m,isLoading:c,leaderboardLoading:o,teamLeaderboardLoading:R,refetchTeeTime:d,refetchLeaderboard:u,refetchTeamLeaderboard:_,refetchTeeTimes:b,updateScoreMutation:P}}const ge="golf-pending-scores",Ce=3,X=class X{constructor(){}static getInstance(){return X.instance||(X.instance=new X),X.instance}addPendingScore(s,a,n){const c=this.getPendingScores(),h=`${s}-${a}`;c[h]={participantId:s,hole:a,shots:n,timestamp:Date.now(),attempts:0},this.savePendingScores(c)}removePendingScore(s,a){const n=this.getPendingScores(),c=`${s}-${a}`;delete n[c],this.savePendingScores(n)}getPendingScores(){try{const s=localStorage.getItem(ge);return s?JSON.parse(s):{}}catch{return{}}}getPendingScoresArray(){const s=this.getPendingScores();return Object.values(s)}getPendingCount(){return this.getPendingScoresArray().length}markAttempted(s,a){const n=this.getPendingScores(),c=`${s}-${a}`;return n[c]?(n[c].attempts+=1,n[c].attempts>=Ce&&delete n[c],this.savePendingScores(n),!!n[c]):!1}clearPendingScores(){localStorage.removeItem(ge)}getRetryableScores(){return this.getPendingScoresArray().filter(s=>s.attempts<Ce)}hasConnectivityIssues(){const s=this.getPendingScoresArray(),a=Math.min(...s.map(n=>n.timestamp));return s.length>0&&Date.now()-a>3e4}savePendingScores(s){try{localStorage.setItem(ge,JSON.stringify(s))}catch(a){console.error("Failed to save pending scores to localStorage:",a)}}};we(X,"instance");let ye=X;const Y={TAB_CHANGE:15e3,VISIBILITY_CHANGE:6e4,PERIODIC:3e4,HOLE_NAVIGATION:2e4,INITIAL_FETCH:1e4};class q{static shouldSync(s,a){return Date.now()-s>a}static getSessionKey(s,a){return`golf-sync-${s}-${a}`}static needsInitialSync(s){return!sessionStorage.getItem(s)}static markSyncCompleted(s){sessionStorage.setItem(s,Date.now().toString())}static async handleInitialSync(s){if(!s.teeTimeId||!s.hasData)return!1;const a=this.getSessionKey("initial",s.teeTimeId);return this.needsInitialSync(a)?(console.log("Initial sync for score entry session..."),await s.onSync(),this.markSyncCompleted(a),!0):!1}static async handleTabChangeSync(s){const{newTab:a,teeTimeId:n,lastSyncTime:c}=s;a==="score"&&n&&this.shouldSync(c,Y.TAB_CHANGE)&&(console.log("Syncing on tab change to score entry..."),await s.onSync()),(a==="leaderboard"||a==="teams")&&(console.log(`Syncing data for ${a} view...`),s.onLeaderboardSync&&await s.onLeaderboardSync(),a==="teams"&&s.onTeamsSync&&await s.onTeamsSync())}static async handleVisibilityChangeSync(s){return document.hidden||!s.isScoreEntry||!s.teeTimeId?!1:this.shouldSync(s.lastSyncTime,Y.VISIBILITY_CHANGE)?(console.log("Syncing after returning to tab..."),await s.onSync(),!0):!1}static shouldSyncOnHoleChange(s,a){return s%3===1&&this.shouldSync(a,Y.HOLE_NAVIGATION)}static async handleHoleNavigationSync(s){return s.teeTimeId&&this.shouldSyncOnHoleChange(s.currentHole,s.lastSyncTime)?(console.log(`Syncing on hole navigation to hole ${s.currentHole}...`),await s.onSync(),!0):!1}static needsInitialFetch(s,a){const n=`lastFetch-${s}-${a}`,c=sessionStorage.getItem(n);return(c?Date.now()-parseInt(c):1/0)>Y.INITIAL_FETCH}static markInitialFetchCompleted(s,a){const n=`lastFetch-${s}-${a}`;sessionStorage.setItem(n,Date.now().toString())}static async handleInitialViewFetch(s,a,n,c){return this.needsInitialFetch(s,a)?(console.log(`Initial fetch for ${s} view...`),await n(),s==="teams"&&c&&await c(),this.markInitialFetchCompleted(s,a),!0):!1}static createSyncStatus(s,a){const n=s.getPendingCount();return{pendingCount:n,lastSyncTime:a,isOnline:navigator.onLine,hasConnectivityIssues:n>0&&Date.now()-a>Y.PERIODIC}}static shouldRunPeriodicSync(s){return s==="leaderboard"||s==="teams"}static async handlePeriodicViewSync(s,a,n){this.shouldRunPeriodicSync(s)&&(console.log(`Periodic sync for ${s} view...`),await a(),s==="teams"&&n&&await n())}static shouldRetryPendingScores(s,a){return s.length>0||this.shouldSync(a,Y.PERIODIC)}}function Es({competitionId:t,teeTimeId:s,activeTab:a,refetchTeeTime:n,refetchLeaderboard:c,refetchTeamLeaderboard:h,refetchTeeTimes:p,updateScoreMutation:b,teeTime:g}){const o=ye.getInstance(),[u,l]=x.useState(Date.now());x.useEffect(()=>{a==="score"&&s&&g&&q.handleInitialSync({teeTimeId:s,competitionId:t||"",activeTab:a,lastSyncTime:u,hasData:!!g,onSync:async()=>{await n(),l(Date.now())}})},[a,s,g,n,t,u]),x.useEffect(()=>{const d=async()=>{await q.handleVisibilityChangeSync({teeTimeId:s,competitionId:t||"",activeTab:a,lastSyncTime:u,isScoreEntry:a==="score",onSync:async()=>{await n(),l(Date.now())}})&&l(Date.now())};return document.addEventListener("visibilitychange",d),()=>document.removeEventListener("visibilitychange",d)},[a,s,u,n,t]),x.useEffect(()=>{if(!s)return;const d=setInterval(async()=>{try{let m=!1;const P=o.getRetryableScores();if(P.length>0){console.log(`Retrying ${P.length} pending scores...`),m=!0;for(const j of P)try{await b.mutateAsync({participantId:j.participantId,hole:j.hole,shots:j.shots}),o.removePendingScore(j.participantId,j.hole)}catch(M){o.markAttempted(j.participantId,j.hole),console.error(`Retry failed for score ${j.participantId}-${j.hole}:`,M)}}q.shouldRetryPendingScores(P,u)&&(m||q.shouldSync(u,Y.PERIODIC))&&(console.log("Syncing with server for latest scores..."),await n(),l(Date.now()))}catch(m){console.error("Sync validation failed:",m)}},Y.PERIODIC);return()=>clearInterval(d)},[s,b,n,o,u]),x.useEffect(()=>{if(!t||!q.shouldRunPeriodicSync(a))return;const d=setInterval(async()=>{await q.handlePeriodicViewSync(a,async()=>{await c(),h&&await h()},async()=>{await p()}),l(Date.now())},Y.PERIODIC);return()=>clearInterval(d)},[a,t,c,h,p]),x.useEffect(()=>{(a==="leaderboard"||a==="teams")&&t&&q.handleInitialViewFetch(a,t,async()=>{await c(),h&&await h()},async()=>{await p()})},[a,t,c,h,p]);const v=q.createSyncStatus(o,u),R=x.useCallback((d,m,P)=>{const j=parseInt(d);o.addPendingScore(j,m,P),b.mutate({participantId:j,hole:m,shots:P},{onSuccess:()=>{o.removePendingScore(j,m),l(Date.now())},onError:M=>{console.error("Score update failed:",M),o.markAttempted(j,m)}})},[b,o]),_=x.useCallback(async d=>{(d==="leaderboard"||d==="teams")&&(await c(),h&&await h()),(d==="teams"||d==="participants")&&await p(),l(Date.now())},[c,h,p]),B=x.useCallback(async()=>{s&&(await n(),l(Date.now()))},[n,s]);return{syncStatus:v,handleScoreUpdate:R,handleTabChangeSync:_,handleHoleNavigationSync:B}}function As(t){return t?{id:t.id.toString(),players:t.participants.map(s=>({participantId:s.id.toString(),participantName:s.team_name,participantType:We(s.position_name),isMultiPlayer:Ze(s.position_name),scores:s.score,playerNames:s.player_name,playerId:s.player_id}))}:null}function Hs(t){return t?{id:t.id,team_name:t.team_name,position_name:t.position_name,player_name:t.player_name,score:t.score,tee_time_id:t.tee_time_id}:null}const be=t=>`golf-current-hole-${t}`,_s=(t,s)=>{t&&s&&sessionStorage.setItem(be(t),s.toString())};function ke({visible:t,teeTimeGroup:s,course:a,currentHole:n,onClose:c,onLockRound:h,netScoringData:p}){const[b,g]=x.useState(!1);return t?e.jsxs("div",{className:"fixed inset-0 bg-scorecard z-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-soft-grey",children:[e.jsx("h2",{className:"text-lg font-semibold font-display text-fairway",children:"Full Scorecard"}),e.jsx("button",{onClick:c,className:"p-2 -mr-2 hover:bg-rough/30 rounded-xl transition-colors",children:e.jsx(je,{className:"h-5 w-5 text-charcoal"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"px-2 py-4 space-y-4",children:s.players.map(o=>{const u=p==null?void 0:p.get(o.participantId);return e.jsx(us,{participant:{id:o.participantId,name:o.playerNames||o.participantName,type:o.participantType,isMultiPlayer:o.isMultiPlayer,scores:o.scores},course:a,currentHole:n,strokeIndex:u==null?void 0:u.strokeIndex,handicapStrokesPerHole:u==null?void 0:u.handicapStrokesPerHole,courseHandicap:u==null?void 0:u.courseHandicap,handicapIndex:u==null?void 0:u.handicapIndex},o.participantId)})})}),h&&e.jsx("div",{className:"p-4 border-t border-soft-grey bg-scorecard",children:e.jsx("button",{onClick:()=>g(!0),className:"w-full bg-coral text-scorecard py-3 px-4 rounded-xl font-medium hover:bg-orange-600 transition-colors font-primary",children:"Finalize and Lock Round"})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-scorecard rounded-2xl shadow-xl max-w-sm w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-coral bg-opacity-20 rounded-full",children:e.jsx(es,{className:"w-6 h-6 text-coral"})}),e.jsx("h2",{className:"text-xl font-bold text-center font-display text-fairway mb-2",children:"Finalize Round"}),e.jsx("p",{className:"text-center text-charcoal mb-6 font-primary",children:"Are you sure you want to finalize and lock this round? This action cannot be undone and will prevent any further score changes."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 bg-soft-grey bg-opacity-30 text-charcoal py-3 px-4 rounded-xl font-medium hover:bg-soft-grey hover:bg-opacity-50 transition-colors font-primary",children:"Cancel"}),e.jsx("button",{onClick:()=>{g(!1),h==null||h()},className:"flex-1 bg-coral text-scorecard py-3 px-4 rounded-xl font-medium hover:bg-orange-600 transition-colors font-primary",children:"Finalize & Lock"})]})]})})})]}):null}function Ls({visible:t,players:s,currentPlayerIndex:a,currentHole:n,holePar:c,netScoringData:h,onScoreSelect:p,onPlayerSelect:b,onClose:g,onSpecialAction:o,isTourCompetition:u=!1}){const[l,v]=x.useState(!1),[R,_]=x.useState(!1),[B,d]=x.useState(!1),[m,P]=x.useState(10);x.useEffect(()=>{if(t)_(!0),d(!1),P(10),requestAnimationFrame(()=>{requestAnimationFrame(()=>{v(!0)})});else{v(!1);const i=setTimeout(()=>{_(!1),d(!1)},300);return()=>clearTimeout(i)}},[t]);const j=i=>{if(i===1)return"HIO";const y=i-c;return y<=-4?"OTHER":y===-3?"ALBA":y===-2?"EAGLE":y===-1?"BIRDIE":y===0?"PAR":y===1?"BOGEY":y===2?"DOUBLE":y===3?"TRIPLE":y===4?"QUAD":y>=5?"OTHER":""},M=i=>i===c,L=i=>{const y=i.split(" ");if(y.length>=2){const A=y[0],E=y[1];return i.length<=14?i:A.length<=8?`${A} ${E.charAt(0)}.`:E.length<=8?`${A.charAt(0)}. ${E}`:`${A.charAt(0)}. ${E.charAt(0)}.`}return i.length>12?`${i.substring(0,11)}...`:i};return R?e.jsxs("div",{className:w("fixed inset-0 z-50 flex flex-col transition-opacity duration-300 ease-in-out",l?"opacity-100":"opacity-0"),style:{backgroundColor:"#121212"},children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10",children:[e.jsx("button",{onClick:g,className:"p-2 rounded-full hover:bg-white/10 transition-colors touch-manipulation",children:e.jsx(je,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-lg font-bold text-white font-display",children:["Hole ",n," | Par ",c]})}),e.jsx("div",{className:"w-10"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto divide-y divide-white/10",children:s.map((i,y)=>{var K;const A=y===a,E=i.scores[n-1]??0,V=h==null?void 0:h.get(i.participantId),U=((K=V==null?void 0:V.handicapStrokesPerHole)==null?void 0:K[n-1])??0,Q=V==null?void 0:V.courseHandicap,Z=E>0?E-U:null,N=i.playerNames?L(i.playerNames):u?"Player":`${i.participantName} ${i.participantType||""}`.trim();return e.jsxs("button",{onClick:()=>b(y),className:w("w-full flex items-center justify-between px-4 py-5 transition-colors touch-manipulation",A?"border-l-4 border-l-turf bg-turf/10":"border-l-4 border-l-transparent hover:bg-white/5"),children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:w("text-base font-semibold font-display",A?"text-white":"text-white/90"),children:N}),Q!==void 0&&e.jsxs("span",{className:w("text-sm font-primary",A?"text-white/80":"text-white/50"),children:["HCP ",Q]})]}),e.jsxs("div",{className:w("w-14 h-14 rounded-full flex items-center justify-center relative",A?"bg-white":"bg-turf"),children:[e.jsx("span",{className:w("text-xl font-bold font-display",A?"text-turf":"text-white"),children:E>0?E:E===-1?"‚àí":h&&U>0?`-${U}`:"0"}),h&&E>0&&e.jsx("span",{className:w("absolute bottom-1.5 right-2 text-sm font-medium font-primary",A?"text-charcoal/60":"text-white/60"),children:Z})]})]},i.participantId)})}),e.jsxs("div",{className:"p-2 pb-6 bg-[#1c1c1e] relative",children:[B&&e.jsxs("div",{className:"absolute inset-0 bg-[#1c1c1e] z-10 flex flex-col p-2 pb-6",children:[e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-4 py-4",children:[e.jsx("button",{onMouseDown:i=>{i.preventDefault(),P(Math.max(10,m-1))},className:"w-16 h-16 rounded-full bg-[#2a2a2a] hover:bg-[#3a3a3a] flex items-center justify-center touch-manipulation transition-colors",children:e.jsx(ws,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:"w-24 text-center",children:e.jsx("span",{className:"text-5xl font-bold text-white font-display",children:m})}),e.jsx("button",{onMouseDown:i=>{i.preventDefault(),P(m+1)},className:"w-16 h-16 rounded-full bg-[#2a2a2a] hover:bg-[#3a3a3a] flex items-center justify-center touch-manipulation transition-colors",children:e.jsx(ss,{className:"w-8 h-8 text-white"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onMouseDown:i=>{i.preventDefault(),d(!1)},className:"h-14 bg-[#2a2a2a] hover:bg-[#3a3a3a] rounded-lg text-white font-semibold transition-colors touch-manipulation font-primary",children:"Cancel"}),e.jsx("button",{onMouseDown:i=>{i.preventDefault(),p(m),d(!1)},className:"h-14 bg-turf hover:bg-turf/80 rounded-lg flex items-center justify-center transition-colors touch-manipulation",children:e.jsx(ts,{className:"w-7 h-7 text-white"})})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 mb-1.5",children:[1,2,3].map(i=>e.jsxs("button",{onMouseDown:y=>{y.preventDefault(),p(i)},className:w("h-14 rounded-lg text-xl font-bold transition-colors touch-manipulation flex flex-col items-center justify-center font-primary",M(i)?"bg-turf text-white":"bg-[#2a2a2a] text-white hover:bg-[#3a3a3a]"),children:[e.jsx("span",{children:i}),e.jsx("span",{className:"text-xs font-semibold uppercase mt-0.5 leading-none opacity-75",children:j(i)})]},i))}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 mb-1.5",children:[4,5,6].map(i=>e.jsxs("button",{onMouseDown:y=>{y.preventDefault(),p(i)},className:w("h-14 rounded-lg text-xl font-bold transition-colors touch-manipulation flex flex-col items-center justify-center font-primary",M(i)?"bg-turf text-white":"bg-[#2a2a2a] text-white hover:bg-[#3a3a3a]"),children:[e.jsx("span",{children:i}),e.jsx("span",{className:"text-xs font-semibold uppercase mt-0.5 leading-none opacity-75",children:j(i)})]},i))}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 mb-1.5",children:[7,8,9].map(i=>e.jsxs("button",{onMouseDown:y=>{y.preventDefault(),p(i)},className:w("h-14 rounded-lg text-xl font-bold transition-colors touch-manipulation flex flex-col items-center justify-center font-primary",M(i)?"bg-turf text-white":"bg-[#2a2a2a] text-white hover:bg-[#3a3a3a]"),children:[e.jsx("span",{children:i}),e.jsx("span",{className:"text-xs font-semibold uppercase mt-0.5 leading-none opacity-75",children:j(i)})]},i))}),e.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[e.jsxs("button",{onMouseDown:i=>{i.preventDefault(),P(10),d(!0)},className:"h-14 bg-[#2a2a2a] text-white hover:bg-[#3a3a3a] rounded-lg text-xl font-bold transition-colors touch-manipulation flex flex-col items-center justify-center font-primary",children:[e.jsx("span",{children:"10+"}),e.jsx("span",{className:"text-xs font-semibold uppercase mt-0.5 leading-none opacity-75",children:j(10)})]}),e.jsx("button",{onMouseDown:i=>{i.preventDefault(),o("clear")},className:"h-14 bg-[#2a2a2a] text-flag hover:bg-[#3a3a3a] rounded-lg text-xl font-bold transition-colors touch-manipulation flex flex-col items-center justify-center font-primary",children:e.jsx("span",{children:"‚àí"})}),e.jsxs("button",{onMouseDown:i=>{i.preventDefault(),o("unreported")},className:"h-14 bg-[#2a2a2a] text-white/50 hover:bg-[#3a3a3a] rounded-lg text-xl font-bold transition-colors touch-manipulation flex flex-col items-center justify-center font-primary",children:[e.jsx("span",{children:"0"}),e.jsx("span",{className:"text-xs font-semibold uppercase mt-0.5 leading-none opacity-75",children:"CLEAR"})]})]})]})]}):null}function $s({onScoreSubmit:t,onCancel:s}){const[a,n]=x.useState(!1),[c,h]=x.useState(""),p=x.useCallback(()=>{n(!0),h("")},[]),b=x.useCallback(()=>{n(!1),h(""),s()},[s]),g=x.useCallback(()=>{const u=parseInt(c,10);!isNaN(u)&&u>=9&&(t(u),b())},[c,t,b]),o=x.useCallback(u=>{const l=u.target.value;/^\d*$/.test(l)&&h(l)},[]);return{isVisible:a,inputValue:c,show:p,hide:b,handleSubmit:g,handleInputChange:o}}function Rs({teeTimeGroup:t,course:s,onScoreUpdate:a,currentHole:n,onHoleChange:c,syncStatus:h,onPlayerNameClick:p,isReadyToFinalize:b=!1,onFinalize:g,isLocked:o=!1,competition:u,isTourCompetition:l=!1,netScoringData:v}){var re;const R=()=>{for(let r=17;r>=0;r--)if(t.players.some(k=>{const S=k.scores[r];return S&&S>0}))if(t.players.every(S=>{const H=S.scores[r];return H&&H!==0})){if(r<17)return r+2}else return r+1;return 1},_=Pe(),[B,d]=x.useState(()=>R()),m=n!==void 0?n:B,[P,j]=x.useState(0),[M,L]=x.useState(!1),[i,y]=x.useState(!1),[A,E]=x.useState(!1),[V,U]=x.useState(!1),{isVisible:Q,inputValue:Z,show:N,hide:K,handleSubmit:de,handleInputChange:ue}=$s({onScoreSubmit:r=>{z&&(a(z.participantId,m,r),G())},onCancel:()=>{L(!0)}}),z=t.players[P],T=s.holes.find(r=>r.number===m),he=r=>{let C=0,k=0;for(let S=0;S<s.holes.length;S++){const H=r.scores[S];if(H===-1)return null;H&&H>0&&(C+=H,k+=s.holes[S].par)}return k===0?null:C-k},G=()=>{for(let r=P+1;r<t.players.length;r++){const C=t.players[r].scores[m-1];if(C===void 0||C===0){j(r);return}}for(let r=0;r<P;r++){const C=t.players[r].scores[m-1];if(C===void 0||C===0){j(r);return}}U(!0),L(!1),E(!1),setTimeout(()=>{U(!1);const r=m<18?m+1:1;c?c(r):d(r),j(0)},800)},W=r=>{o||(j(r),L(!0),E(!0))},J=r=>{o||z&&(a(z.participantId,m,r),G())},me=r=>{if(!o){if(r==="more")L(!1),N();else if(r==="clear"){if(!z)return;a(z.participantId,m,-1),G()}else if(r==="unreported"){if(!z)return;a(z.participantId,m,0),G()}}},xe=()=>{L(!1),E(!1)},fe=r=>{p&&p(r.participantId,r.playerNames||null,r.participantType||"")},ee=r=>{const C=r.split(" ");if(C.length>=2){const k=C[0],S=C[1];return r.length<=23?r:k.length<=10?`${k} ${S.charAt(0)}.`:S.length<=10?`${k.charAt(0)}. ${S}`:`${k.charAt(0)}. ${S.charAt(0)}.`}return r.length>23?`${r.substring(0,22)}...`:r};return x.useEffect(()=>{const r=C=>{A&&!C.target.closest(".score-entry")&&(L(!1),E(!1))};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[A]),e.jsxs("div",{className:"score-entry flex flex-col h-screen-mobile bg-scorecard relative",children:[h&&(h.pendingCount>0||h.hasConnectivityIssues)&&e.jsx("div",{className:w("px-3 py-2 text-center text-xs font-medium",h.hasConnectivityIssues?"bg-flag text-scorecard border-b border-flag":"bg-coral text-scorecard border-b border-coral"),children:h.hasConnectivityIssues?e.jsxs("span",{children:["‚ö†Ô∏è Connection issues - ",h.pendingCount," score(s) pending"]}):e.jsxs("span",{children:["üì° Saving ",h.pendingCount," score(s)..."]})}),V&&e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-turf text-scorecard px-6 py-4 rounded-xl shadow-lg z-30 animate-pulse",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold font-display",children:["‚úì Hole ",m," Complete!"]}),e.jsxs("div",{className:"text-sm opacity-90 font-primary",children:["Moving to hole ",m<18?m+1:1,"..."]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto",style:{minHeight:"60%"},children:[e.jsx("div",{className:"bg-rough bg-opacity-30 px-4 py-2 border-b border-soft-grey border-l-4 border-l-transparent",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[m>1&&e.jsxs("div",{className:"text-center w-12",children:[e.jsx("div",{className:"text-lg font-bold text-fairway font-display",children:m-1}),e.jsxs("div",{className:"text-xs text-fairway/70 font-primary",children:["Par"," ",((re=s.holes.find(r=>r.number===m-1))==null?void 0:re.par)||4]})]}),e.jsxs("div",{className:"text-center w-12",children:[e.jsx("div",{className:"text-lg font-bold text-fairway font-display",children:m}),e.jsxs("div",{className:"text-xs text-fairway/70 font-primary",children:["Par ",(T==null?void 0:T.par)||4]})]})]})})}),e.jsx("div",{className:"divide-y divide-soft-grey",children:t.players.map((r,C)=>{var oe;const k=r.scores[m-1]??0,S=m>1?r.scores[m-2]??0:null,H=he(r),F=v==null?void 0:v.get(r.participantId),D=((oe=F==null?void 0:F.handicapStrokesPerHole)==null?void 0:oe[m-1])??0,se=F==null?void 0:F.courseHandicap,pe=k>0?k-D:null;return e.jsx("div",{className:"py-4 px-4 transition-colors hover:bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[r.playerId?e.jsxs("div",{className:"p-1 -m-1",children:[e.jsx("h3",{className:"text-body-lg font-semibold text-charcoal font-display",children:r.playerNames?ee(r.playerNames):"Player"}),!l&&e.jsxs("p",{className:"text-label-sm text-turf font-primary",children:[r.participantName," ",r.participantType]})]}):e.jsx("button",{onClick:()=>fe(r),className:"text-left w-full hover:bg-rough/10 rounded-md p-1 -m-1 transition-colors",children:r.playerNames?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-body-lg font-semibold text-charcoal font-display",children:ee(r.playerNames)}),!l&&e.jsxs("p",{className:"text-label-sm text-turf font-primary",children:[r.participantName," ",r.participantType]})]}):l?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-body-lg font-semibold text-charcoal font-display",children:"Player"}),e.jsxs("div",{className:"flex items-center gap-1 text-label-sm text-soft-grey font-primary",children:[e.jsx(Se,{className:"w-3 h-3"}),e.jsx("span",{children:"+ Add player name"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-body-lg font-semibold text-charcoal font-display",children:[r.participantName," ",r.participantType]}),e.jsxs("div",{className:"flex items-center gap-1 text-label-sm text-soft-grey font-primary",children:[e.jsx(Se,{className:"w-3 h-3"}),e.jsx("span",{children:"+ Add player name"})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:w("text-label-sm font-medium font-primary",H!==null?ms(H):"text-soft-grey"),children:H!==null?hs(H):"-"}),se!==void 0&&e.jsxs("span",{className:"text-xs px-1.5 py-0.5 bg-soft-grey/20 text-charcoal/70 rounded font-primary",children:["HCP ",se]}),D>0&&e.jsx("span",{className:"flex items-center gap-0.5",children:Array.from({length:D}).map((ie,te)=>e.jsx("span",{className:"w-2 h-2 bg-coral rounded-full",title:`Receives ${D} stroke${D>1?"s":""} on this hole`},te))})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[m>1&&e.jsx("div",{className:"text-center w-12 relative",children:e.jsxs("div",{className:w("text-xl font-bold font-display inline-block relative",S&&S>0?"text-fairway":"text-charcoal/40"),children:[xs(S||0),v&&S!==null&&S>0?(()=>{var ae;const ie=((ae=F==null?void 0:F.handicapStrokesPerHole)==null?void 0:ae[m-2])??0,te=S-ie;return e.jsx("span",{className:"absolute -bottom-0.5 -right-2.5 text-xs font-medium text-charcoal/60 font-primary",children:te})})():null]})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("button",{onClick:()=>W(C),disabled:o,className:w("w-12 h-12 rounded-full flex items-center justify-center touch-manipulation transition-colors relative",o?"bg-soft-grey/30 cursor-not-allowed":"bg-turf/10 hover:bg-turf/20 active:bg-turf/30"),children:[e.jsx("span",{className:w("text-xl font-bold font-display",k>0?"text-fairway":"text-charcoal/40"),children:k>0?k:k===-1?"‚àí":v&&D>0?`-${D}`:"0"}),v&&k>0&&e.jsx("span",{className:"absolute bottom-1 right-1.5 text-xs font-medium text-charcoal/60 font-primary",children:pe})]})})]})]})},r.participantId)})}),e.jsxs("div",{className:"px-4 py-6",children:[!b&&e.jsxs("button",{onClick:()=>y(!0),className:"w-full bg-turf hover:bg-fairway text-scorecard font-semibold py-4 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2 font-primary",children:[e.jsx(as,{size:20}),e.jsx("span",{children:"View Full Scorecard"})]}),b&&!o&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>y(!0),className:"flex-1 bg-turf hover:bg-fairway text-scorecard font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2 font-primary",children:e.jsx("span",{children:"Review Scorecard"})}),e.jsx("button",{onClick:g,className:"flex-1 bg-coral hover:bg-orange-600 text-scorecard font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2 font-primary",children:e.jsx("span",{children:"Complete Round"})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-scorecard rounded-2xl shadow-xl max-w-sm w-full mx-4",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-turf bg-opacity-20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-turf text-3xl",children:"‚úì"})}),e.jsx("h3",{className:"text-2xl font-bold mb-4 font-display text-fairway",children:"Round Complete!"}),e.jsx("p",{className:"text-charcoal font-primary mb-8 leading-relaxed",children:"Your round has been successfully finalized and locked. All scores have been submitted and the results are now official."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{const r=window.location.pathname.split("/"),C=r[r.indexOf("competitions")+1];u!=null&&u.series_id?_({to:`/player/competitions/${C}`,hash:"teamresult"}):_({to:`/player/competitions/${C}`,hash:"leaderboard"})},className:"w-full bg-turf hover:bg-fairway text-scorecard font-semibold py-4 px-6 rounded-xl transition-colors font-primary",children:"View Leaderboard"}),e.jsx("button",{onClick:()=>{u!=null&&u.series_id?_({to:`/player/series/${u.series_id}`}):_({to:"/player"})},className:"w-full bg-soft-grey bg-opacity-30 hover:bg-soft-grey hover:bg-opacity-50 text-charcoal font-semibold py-4 px-6 rounded-xl transition-colors font-primary",children:u!=null&&u.series_id?`Back to ${u.series_name}`:"Back to Home"})]})]})})})]})]}),!o&&e.jsx(Ls,{visible:M,players:t.players,currentPlayerIndex:P,currentHole:m,holePar:(T==null?void 0:T.par)||4,netScoringData:v,onScoreSelect:J,onPlayerSelect:r=>j(r),onClose:xe,onSpecialAction:me,isTourCompetition:l}),e.jsx(ke,{visible:i,teeTimeGroup:t,course:s,currentHole:m,onClose:()=>y(!1),netScoringData:v}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-scorecard rounded-xl p-6 w-full max-w-sm border border-soft-grey",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 font-display text-fairway",children:"Enter Score (9 or higher)"}),e.jsx("input",{type:"number",value:Z,onChange:ue,className:"w-full p-3 border-2 border-soft-grey rounded-xl mb-4 text-2xl text-center font-display text-charcoal focus:border-turf focus:bg-rough focus:bg-opacity-20 transition-colors",placeholder:"Enter score",autoFocus:!0}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:K,className:"flex-1 p-3 bg-rough bg-opacity-30 rounded-xl hover:bg-rough hover:bg-opacity-50 font-medium font-primary text-fairway transition-colors",children:"Cancel"}),e.jsx("button",{onClick:de,className:"flex-1 p-3 bg-turf text-scorecard rounded-xl hover:bg-fairway font-medium font-primary transition-colors",children:"Submit"})]})]})})]})}Array.from({length:18},(t,s)=>({number:s+1,par:Math.floor(Math.random()*2)+3}));Array(18).fill(null),Array(18).fill(null),Array(18).fill(null),Array(18).fill(null);function Ms(t,s){return t?{id:t.id.toString(),name:s?s.name:`${t.course_name} ${t.teetime}`,holes:t.pars.map((a,n)=>({number:n+1,par:a}))}:null}function zs(){var ae;const{competitionId:t,teeTimeId:s}=ns({strict:!1}),a=()=>{if(s)return"score";const f=window.location.hash.replace("#","");return f==="teams"?"teams":f==="participants"?"participants":"leaderboard"},[n,c]=x.useState(a),[h,p]=x.useState(null),[b,g]=x.useState(null),[o,u]=x.useState(()=>{if(s){const f=be(s),I=sessionStorage.getItem(f);if(I){const O=parseInt(I,10);if(O>=1&&O<=18)return O}}return 1}),{competition:l,course:v,teeTimes:R,leaderboard:_,teamLeaderboard:B,teeTime:d,selectedParticipant:m,isLoading:P,leaderboardLoading:j,teamLeaderboardLoading:M,refetchTeeTime:L,refetchLeaderboard:i,refetchTeamLeaderboard:y,refetchTeeTimes:A,updateScoreMutation:E}=ks({competitionId:t,teeTimeId:s,selectedParticipantId:h}),{syncStatus:V,handleScoreUpdate:U,handleTabChangeSync:Q,handleHoleNavigationSync:Z}=Es({competitionId:t,teeTimeId:s,activeTab:n,refetchTeeTime:L,refetchLeaderboard:i,refetchTeamLeaderboard:y,refetchTeeTimes:A,updateScoreMutation:E,teeTime:d});rs((l==null?void 0:l.series_id)||0);const{data:N}=os(t?parseInt(t):0),K=x.useMemo(()=>{var le;if(!(N!=null&&N.scoringMode))return;const{scoringMode:f}=N;if(f!=="net"&&f!=="both")return;const I=(le=N.tee)==null?void 0:le.strokeIndex,O=new Map;return N.entries.forEach($=>{const ne=$.participant.id.toString(),ce=I&&$.courseHandicap!==void 0?fs($.courseHandicap,I):void 0;O.set(ne,{participantId:ne,strokeIndex:I,handicapStrokesPerHole:ce,courseHandicap:$.courseHandicap,handicapIndex:$.participant.handicap_index})}),O},[N]),de=is(),ue=ls(),[z,T]=x.useState(!1),[he,G]=x.useState(!1);x.useEffect(()=>{s&&o&&_s(s,o)},[s,o]),x.useEffect(()=>{if(d!=null&&d.participants&&d.participants.length>0)if(d.participants.filter(I=>Array.isArray(I.score)).length===d.participants.length){const I=ps(d.participants);T(I)}else T(!1);else T(!1)},[d]),x.useEffect(()=>{if(!d)return;const f=s?be(s):null,I=f?sessionStorage.getItem(f):null,O=Array.isArray(d.participants)?d.participants:[],le=O.length===0||O.every(ce=>{const ve=Array.isArray(ce.score)?ce.score:[];return ve.length===0||ve.every(Ne=>!Ne||Ne===0)}),$=typeof d.start_hole=="number"?d.start_hole:void 0,ne=$===1||$===10;if(le&&ne){u($),f&&sessionStorage.setItem(f,String($));return}!I&&ne&&(u($),f&&sessionStorage.setItem(f,String($)))},[d,s]);const W=As(d),J=Ms(d,v),me=Hs(m||null),xe=d&&v?{id:v.id.toString(),name:v.name,holes:d.pars.map((f,I)=>({number:I+1,par:f}))}:null,fe=async f=>{c(f),await Q(f)},ee=f=>{p(f)},re=()=>{p(null)},r=()=>{console.log("Round completed!")},C=(f,I,O)=>{g({id:f,currentName:I,positionName:O})},k=()=>{g(null)},S=(f,I)=>{de.mutate({id:parseInt(f),data:{player_names:I}},{onSuccess:()=>{L(),g(null)}})},H=x.useCallback(async f=>{u(f),await Z()},[Z]),F=B||[],D=gs(R),se=J==null?void 0:J.holes.find(f=>f.number===o),pe=()=>{G(!0)},oe=()=>{d!=null&&d.participants&&(d.participants.forEach(f=>{ue.mutate(f.id)}),G(!1))},ie=((ae=d==null?void 0:d.participants)==null?void 0:ae.some(f=>f.is_locked))||!1;if(P)return e.jsx("div",{className:"p-4",children:"Loading competition..."});if(!l)return e.jsx("div",{className:"p-4",children:"Competition not found"});const te=()=>{switch(n){case"score":return!W||!J?e.jsx(Fs,{teeTimes:R||[],competitionId:t||""}):e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Rs,{teeTimeGroup:W,course:J,onScoreUpdate:U,onComplete:r,currentHole:o,onHoleChange:H,syncStatus:V,onPlayerNameClick:C,isReadyToFinalize:z,onFinalize:pe,isLocked:ie,competition:{id:l.id,series_id:l.series_id,series_name:l.series_name,tour_id:l.tour_id},isTourCompetition:!!l.tour_id,netScoringData:K})})});case"leaderboard":const f=l!=null&&l.tour_id?N==null?void 0:N.entries:_;return e.jsx(vs,{leaderboard:f,leaderboardLoading:j,onParticipantClick:ee,isRoundView:!0,isTourCompetition:!!(l!=null&&l.tour_id),scoringMode:N==null?void 0:N.scoringMode,teeInfo:N==null?void 0:N.tee,categoryTees:N==null?void 0:N.categoryTees,categories:N==null?void 0:N.categories});case"teams":return e.jsx(js,{teamResults:F,leaderboardLoading:M,individualResults:_,isRoundView:!0,onParticipantClick:ee});case"participants":return e.jsx(bs,{teeTimes:R,teeTimesLoading:!1,competitionId:t||"",venueType:l==null?void 0:l.venue_type,currentTeeTimeId:s,currentTeeTime:d,showCurrentGroup:!0,totalParticipants:D,isTourCompetition:!!(l!=null&&l.tour_id),isOpenStart:(l==null?void 0:l.start_mode)==="open",onGroupUpdated:()=>{L(),A()}});default:return null}};return e.jsxs(cs,{title:l.name,subtitle:v==null?void 0:v.name,seriesId:l.series_id,seriesName:l.series_name,className:"h-screen flex flex-col",children:[e.jsx("div",{className:"flex-1 overflow-hidden",children:te()}),n==="score"&&se&&e.jsx(Is,{currentHole:o,holePar:se.par,holeHcp:(()=>{var f;if(K&&K.size>0){const I=K.values().next().value;return(f=I==null?void 0:I.strokeIndex)==null?void 0:f[o-1]}})(),onPrevious:()=>H(Math.max(1,o-1)),onNext:()=>H(Math.min(18,o+1)),canGoPrevious:o>1,canGoNext:o<18,className:"flex-shrink-0"}),e.jsx(Ps,{activeTab:n,onTabChange:fe,className:"flex-shrink-0",hiddenTabs:l!=null&&l.tour_id?["teams"]:[],participantsLabel:l!=null&&l.tour_id?"Groups":void 0}),e.jsx(Ss,{competition:l,courseName:v==null?void 0:v.name,totalParticipants:D,variant:"footer"}),e.jsx(ys,{visible:h!==null,participant:me,course:xe,onClose:re}),e.jsx(Cs,{isOpen:b!==null,onClose:k,onSave:S,participant:b}),e.jsx(ke,{visible:he,teeTimeGroup:W||{id:"",players:[]},course:J||{id:"",name:"",holes:[]},currentHole:o,onClose:()=>G(!1),onLockRound:oe,netScoringData:K})]})}function Fs({teeTimes:t,competitionId:s}){const a=Pe();return e.jsx("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold text-charcoal mb-4",children:"No Valid Tee Time"}),e.jsx("p",{className:"text-turf mb-6",children:"You don't have access to score entry for this competition. You can view the leaderboard or participant list instead."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>a({to:`/player/competitions/${s}`}),className:"w-full bg-coral text-scorecard px-4 py-2 rounded-lg font-medium hover:bg-coral/90 transition-colors",children:"View Competition Details"}),t&&t.length>0&&e.jsxs("div",{className:"text-sm text-turf",children:[e.jsx("p",{className:"mb-2",children:"Available tee times:"}),e.jsxs("div",{className:"space-y-1",children:[t.slice(0,3).map(n=>e.jsxs("div",{className:"text-xs",children:[n.teetime," - ",n.participants.length," players"]},n.id)),t.length>3&&e.jsxs("div",{className:"text-xs",children:["... and ",t.length-3," more"]})]})]})]})]})})}export{zs as default};
