import{ah as ee,r as H,j as e,ai as te,aj as se,ak as ae,al as re,am as le,an as V,ao as D,h as E,t as ie,f as ce,P as Q,g as z,R as W,ap as Y,aq as ne,b as oe,a5 as C,U as A,Q as q,ar as M,as as de,at as xe,a6 as J}from"./index-INsmI_C0.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],K=ee("circle",me);function ue({leaderboard:i,leaderboardLoading:j,onParticipantClick:N,isRoundView:v=!1,isTourCompetition:o=!1,scoringMode:d,teeInfo:w,categoryTees:k,categories:x}){const[F,S]=H.useState("all"),[P,R]=H.useState(void 0),[y,_]=H.useState(d==="net"||d==="both"?"net":"gross");H.useEffect(()=>{x&&x.length>0&&P===void 0&&R(x[0].id)},[x,P]);const a=d==="net"||d==="both",h=t=>{if(t.isDNF)return"DNF";const l=t.participant.score.includes(-1),s=t.participant.is_locked;return t.holesPlayed>0?s&&!l?"FINISHED":"IN_PROGRESS":"NOT_STARTED"},f=t=>{const l=h(t);return l==="DNF"?"DNF":l==="NOT_STARTED"?t.startTime?t.startTime:"TBD":l==="FINISHED"?"F":t.holesPlayed.toString()},g=(i?[...i].sort((t,l)=>{if(t.isDNF&&!l.isDNF)return 1;if(!t.isDNF&&l.isDNF)return-1;if(t.isDNF&&l.isDNF)return l.holesPlayed-t.holesPlayed;const s=t.participant.score.includes(-1),m=l.participant.score.includes(-1),p=t.holesPlayed>0,u=l.holesPlayed>0,$=p&&!s,T=u&&!m,G=p&&s,L=u&&m,O=!p,B=!u;if($&&!T)return-1;if(!$&&T)return 1;if(G&&B)return-1;if(O&&L)return 1;if($&&T){if(y==="net"){const Z=t.netRelativeToPar??t.relativeToPar,U=l.netRelativeToPar??l.relativeToPar;return Z-U}return t.relativeToPar-l.relativeToPar}return 0}):[]).filter(t=>!(F==="finished"&&h(t)!=="FINISHED"||P!==void 0&&t.participant.category_id!==P)),r=(t,l,s)=>{if(s)return"border-red-300 text-red-500";if(l===0)return"border-gray-300 text-gray-500";switch(t){case 0:return"border-yellow-400 text-yellow-400";case 1:return"border-gray-400 text-gray-400";case 2:return"border-orange-400 text-orange-400";default:return"border-gray-300 text-gray-500"}},c=(t,l,s)=>{if(s)return"bg-red-50/50 hover:bg-red-100/50";if(l===0)return"bg-scorecard hover:bg-gray-50";switch(t){case 0:return"bg-yellow-50 hover:bg-yellow-100";case 1:return"bg-gray-50 hover:bg-gray-100";case 2:return"bg-orange-50 hover:bg-orange-100";default:return"bg-scorecard hover:bg-gray-50"}},n=e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-fairway font-display",children:"Leaderboard"}),k&&k.length>0?e.jsx("div",{className:"text-xs text-turf font-primary mt-1 space-y-0.5",children:k.map(t=>e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[t.categoryName,":"]})," ",t.teeName," (CR: ",t.courseRating.toFixed(1),", SR: ",t.slopeRating,")"]},t.categoryId))}):w?e.jsxs("div",{className:"text-xs text-turf font-primary mt-1",children:[e.jsx("span",{className:"inline-block w-3 h-3 rounded-full mr-1.5 align-middle",style:{backgroundColor:w.color||"#666"}}),w.name," Tees (CR: ",w.courseRating.toFixed(1),", SR: ",w.slopeRating,")"]}):null]}),e.jsx("div",{className:"text-xs md:text-sm text-turf font-primary",children:"Live scoring"})]}),(x&&x.length>=1||d==="both")&&e.jsxs("div",{className:"flex items-center justify-between gap-4 pb-2",children:[x&&x.length>1&&P!==void 0?e.jsxs(te,{value:P.toString(),onValueChange:t=>R(Number(t)),children:[e.jsx(se,{className:"w-auto min-w-[120px] pr-4 bg-scorecard border-soft-grey text-charcoal",children:e.jsx(ae,{placeholder:"Select category"})}),e.jsx(re,{className:"bg-scorecard border-soft-grey",children:x.map(t=>e.jsx(le,{value:t.id.toString(),className:"text-charcoal",children:t.name},t.id))})]}):x&&x.length===1?e.jsx("span",{className:"text-sm font-medium text-charcoal px-3 py-1.5 bg-rough/20 rounded-lg",children:x[0].name}):e.jsx("div",{}),d==="both"&&e.jsxs("div",{className:"flex rounded-lg overflow-hidden border border-soft-grey",children:[e.jsx("button",{onClick:()=>_("gross"),className:`px-4 py-1.5 text-sm font-medium transition-colors ${y==="gross"?"bg-turf text-scorecard":"bg-scorecard text-charcoal hover:bg-rough/30"}`,children:"Gross"}),e.jsx("button",{onClick:()=>_("net"),className:`px-4 py-1.5 text-sm font-medium transition-colors border-l border-soft-grey ${y==="net"?"bg-turf text-scorecard":"bg-scorecard text-charcoal hover:bg-rough/30"}`,children:"Net"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsxs("div",{className:"flex rounded-lg overflow-hidden border border-soft-grey",children:[e.jsx("button",{onClick:()=>S("all"),className:`px-3 py-1.5 text-sm font-medium transition-colors ${F==="all"?"bg-turf text-scorecard":"bg-scorecard text-charcoal hover:bg-rough/30"}`,children:"All"}),e.jsx("button",{onClick:()=>S("finished"),className:`px-3 py-1.5 text-sm font-medium transition-colors border-l border-soft-grey ${F==="finished"?"bg-turf text-scorecard":"bg-scorecard text-charcoal hover:bg-rough/30"}`,children:"Only Finished"})]}),e.jsxs("span",{className:"text-sm text-charcoal/60 ml-auto",children:[g.length," players"]})]}),j?e.jsx("div",{className:"p-4 text-charcoal font-primary",children:"Loading leaderboard..."}):!i||i.length===0?e.jsx("div",{className:"text-center py-6 md:py-8 text-soft-grey font-primary",children:"No scores reported yet."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center px-4 py-2 border-b-2 border-soft-grey bg-gray-50 text-xs text-gray-500 font-medium",children:[e.jsx("div",{className:"w-7 mr-2",children:"#"}),e.jsx("div",{className:"flex-1 min-w-0",children:"Player"}),e.jsxs("div",{className:`flex items-center ${a?"gap-1":""}`,children:[e.jsx("div",{className:"w-10 text-center",children:"Gross"}),a&&e.jsx("div",{className:"w-10 text-center",children:"Net"}),e.jsx("div",{className:"w-8 text-center",children:"Thru"}),o&&e.jsx("div",{className:"w-8 text-center",children:"Pts"})]})]}),g.map((t,l)=>{const s=t.participant.score.includes(-1),m=l===0&&t.holesPlayed>0&&!t.isDNF,p=h(t),u=f(t);return e.jsx("button",{onClick:()=>N(t.participant.id),className:`w-full text-left px-4 py-2.5 border-b border-soft-grey/50 last:border-b-0 hover:bg-gray-50 transition-colors cursor-pointer ${m?"border-l-4 border-l-coral bg-coral/5":""} ${t.isDNF?"bg-red-50/50":""}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-7 text-base font-bold mr-2 ${r(l,t.holesPlayed,t.isDNF)}`,children:t.isDNF||t.holesPlayed===0?"-":l+1}),e.jsx("div",{className:"flex-1 min-w-0 mr-2",children:t.participant.player_name?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:`text-sm font-semibold font-display truncate ${t.isDNF?"text-gray-500":"text-charcoal"}`,children:e.jsx(V,{playerId:t.participant.player_id,playerName:t.participant.player_name,skipFriendCheck:o})}),a&&t.participant.handicap_index!==void 0&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:"text-xs text-turf font-primary",children:["HCP ",t.participant.handicap_index.toFixed(1)]}),t.courseHandicap!==void 0&&e.jsxs("span",{className:"text-xs bg-coral/20 text-coral px-1 py-0.5 rounded font-medium font-primary",children:["PH ",t.courseHandicap]})]})]}):e.jsx("h3",{className:`text-sm font-semibold font-display truncate ${t.isDNF?"text-gray-500":"text-charcoal"}`,children:o?t.participant.position_name:`${t.participant.team_name} ${t.participant.position_name}`})}),e.jsx("div",{className:`flex items-center ${a?"gap-1":""}`,children:p==="NOT_STARTED"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 text-center text-sm text-gray-500",children:u}),o&&e.jsx("div",{className:"w-8 text-center text-sm text-gray-400",children:"-"})]}):p==="DNF"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 text-center text-lg font-bold text-gray-400",children:t.holesPlayed>0?D(t.relativeToPar):"-"}),a&&e.jsx("div",{className:"w-10 text-center text-lg font-bold text-gray-400",children:"-"}),e.jsx("div",{className:"w-8 text-center text-xs font-bold text-red-500",children:"DNF"}),o&&e.jsx("div",{className:"w-8 text-center text-sm text-gray-400",children:"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-10 text-center text-lg font-bold ${s?"text-gray-400":E(t.relativeToPar)}`,children:s?"-":D(t.relativeToPar)}),a&&e.jsx("div",{className:`w-10 text-center text-lg font-bold ${s||t.netRelativeToPar===void 0?"text-gray-400":E(t.netRelativeToPar)}`,children:s||t.netRelativeToPar===void 0?"-":D(t.netRelativeToPar)}),e.jsx("div",{className:"w-8 text-center text-base font-semibold text-gray-600",children:u}),o&&(()=>{const $=y==="net"?t.netPoints:t.points;return e.jsx("div",{className:`w-8 text-center text-sm font-bold ${$&&$>0?t.isProjected?"text-turf/70":"text-turf":"text-gray-400"}`,children:$&&$>0?$:"-"})})()]})})]})},t.participant.id)})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"bg-scorecard rounded-lg border border-soft-grey overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-soft-grey",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-charcoal font-display",children:"Pos"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-charcoal font-display",children:o?"Player":"Player/Team"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-charcoal font-display",children:"Hole & Score"}),o&&e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-charcoal font-display",children:"Pts"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-charcoal font-display"})]})}),e.jsx("tbody",{children:g.map((t,l)=>{const s=t.participant.score.includes(-1),m=h(t),p=f(t);return e.jsxs("tr",{className:`border-b border-soft-grey last:border-b-0 transition-colors duration-200 ${c(l,t.holesPlayed,t.isDNF)}`,children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:`text-sm font-bold ${r(l,t.holesPlayed,t.isDNF)}`,children:t.isDNF||t.holesPlayed===0?"-":l+1})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[t.participant.player_name?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-body-md font-semibold font-display ${t.isDNF?"text-gray-500":"text-charcoal"}`,children:e.jsx(V,{playerId:t.participant.player_id,playerName:t.participant.player_name,skipFriendCheck:o})}),!o&&e.jsxs("div",{className:"text-label-sm text-turf font-primary",children:[t.participant.team_name," ",t.participant.position_name]})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:`text-body-md font-semibold font-display ${t.isDNF?"text-gray-500":"text-charcoal"}`,children:o?t.participant.position_name:`${t.participant.team_name} ${t.participant.position_name}`})}),a&&t.participant.handicap_index!==void 0&&e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{className:"text-xs text-turf font-primary",children:["HCP ",t.participant.handicap_index.toFixed(1)]}),t.courseHandicap!==void 0&&e.jsxs("span",{className:"text-xs bg-coral/20 text-coral px-1.5 py-0.5 rounded font-medium font-primary",children:["PH ",t.courseHandicap]})]})]})}),e.jsx("td",{className:"py-4 px-4 text-center",children:m==="NOT_STARTED"?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Start Time"}),e.jsx("div",{className:"text-base font-medium text-gray-500",children:p})]}):m==="DNF"?e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Status"}),e.jsx("div",{className:"text-xl font-bold text-red-500 font-display",children:"DNF"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Thru ",t.holesPlayed]}),e.jsx("div",{className:"text-xl font-bold text-gray-400 font-display",children:t.holesPlayed>0?D(t.relativeToPar):"-"})]})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Hole"}),e.jsx("div",{className:"text-xl font-bold text-charcoal font-display",children:p})]}),m==="FINISHED"?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:a?"Gross":"Total"}),e.jsx("div",{className:"text-xl font-bold text-charcoal font-display",children:s?"-":t.totalShots})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:a?"Gross":"To Par"}),e.jsx("div",{className:`text-xl font-bold font-display ${s?"text-gray-500":E(t.relativeToPar)}`,children:s?"-":D(t.relativeToPar)})]}),a&&(m==="FINISHED"?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Net"}),e.jsx("div",{className:"text-xl font-bold text-charcoal font-display",children:s||t.netTotalShots===void 0?"-":t.netTotalShots})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Net"}),e.jsx("div",{className:`text-xl font-bold font-display ${s||t.netRelativeToPar===void 0?"text-gray-500":E(t.netRelativeToPar)}`,children:s||t.netRelativeToPar===void 0?"-":D(t.netRelativeToPar)})]}))]})}),o&&(()=>{const u=y==="net"?t.netPoints:t.points;return e.jsxs("td",{className:"py-4 px-4 text-center",children:[e.jsx("div",{className:`text-lg font-bold ${u&&u>0?t.isProjected?"text-turf/70":"text-turf":"text-gray-400"}`,children:u&&u>0?u:"-"}),t.isProjected&&u&&u>0&&e.jsx("div",{className:"text-xs text-gray-500",children:"(proj)"})]})})(),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx("button",{onClick:()=>N(t.participant.id),className:"bg-turf text-scorecard px-3 py-2 rounded-md text-sm font-medium hover:bg-fairway transition-colors duration-200 font-primary",children:"View Card"})})]},t.participant.id)})})]})})})]})]});return v?e.jsx("div",{className:"h-full overflow-y-auto bg-scorecard",children:e.jsx("div",{className:"p-4",children:n})}):n}function he(i){return i.participants.length>0&&i.participants.every(j=>j.is_locked)}function fe(i){return i.participants.some(j=>Array.isArray(j.score)&&j.score.some(N=>N!==0))}function X(i){let j=0;for(const N of i.participants)if(Array.isArray(N.score)){for(let v=N.score.length-1;v>=0;v--)if(N.score[v]!==0){j=Math.max(j,v+1);break}}return j}function I(i){return he(i)?"finished":fe(i)?"playing":"not_started"}function Ne({teeTimes:i,teeTimesLoading:j,competitionId:N,venueType:v="outdoor",currentTeeTimeId:o,currentTeeTime:d,showCurrentGroup:w=!1,totalParticipants:k=0,isTourCompetition:x=!1,isOpenStart:F=!1,onGroupUpdated:S}){var g;const[P,R]=H.useState(!1),[y,_]=H.useState({open:!1,url:"",title:""}),{data:a}=ie(x?parseInt(N):0),h=r=>x?r.player_name||"Player":r.player_name?`${r.player_name}, ${r.team_name} ${J(r.position_name)}`:`${r.team_name} ${J(r.position_name)}`,b=x&&F&&!(r=>r?r.participants.some(c=>Array.isArray(c.score)&&c.score.some(n=>n!==0)):!1)(d);return w?e.jsxs("div",{className:"h-full overflow-y-auto bg-scorecard",children:[e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-fairway font-display",children:"Round Participants"}),e.jsx("div",{className:"text-xs md:text-sm text-turf font-primary",children:o?"Current group":`${k} total`})]}),o&&d&&e.jsxs("div",{className:"border-l-4 border-turf mb-4",children:[e.jsxs("div",{className:"bg-rough/20 px-4 py-3 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm md:text-lg font-semibold text-fairway font-display flex items-center gap-2",children:[F?"Your Group":`Your Group - ${d.teetime}`,e.jsx("span",{className:"text-xs text-turf font-primary font-medium",children:v==="indoor"&&d.hitting_bay?`· Bay ${d.hitting_bay}`:`· Hole ${d.start_hole}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{onClick:()=>_({open:!0,url:Y(parseInt(N),d.id),title:"Share Group"}),variant:"ghost",size:"sm",className:"text-turf hover:text-fairway hover:bg-turf/10",children:e.jsx(W,{className:"h-4 w-4"})}),b?e.jsxs(M,{onClick:()=>R(!0),variant:"ghost",size:"sm",className:"text-turf hover:text-fairway hover:bg-turf/10",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Edit"]}):e.jsx("span",{className:"text-xs md:text-sm text-coral font-semibold font-primary",children:"Active"})]})]}),e.jsx("div",{className:"divide-y divide-soft-grey",children:d.participants.map((r,c)=>{var l;const n=(l=a==null?void 0:a.group)==null?void 0:l.players[c],t=x&&n?n.name:h(r);return e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm md:text-base font-medium text-fairway font-primary",children:[t,(n==null?void 0:n.is_you)&&e.jsx("span",{className:"text-xs text-turf ml-2",children:"(you)"})]}),x&&(n==null?void 0:n.handicap)!==void 0&&e.jsxs("div",{className:"text-sm text-charcoal/70",children:["HCP ",n.handicap.toFixed(1)]})]}),e.jsx("div",{className:"flex items-center gap-2",children:C(r.position_name)&&e.jsx(A,{className:"w-4 h-4 inline-block text-turf"})})]},r.id)})})]}),(()=>{if(!i||i.length===0)return e.jsx("div",{className:"text-center py-6 md:py-8 text-soft-grey font-primary",children:"No tee times scheduled for this competition."});const r=i.filter(s=>!o||s.id!==parseInt(o)),c=r.filter(s=>I(s)==="playing"),n=r.filter(s=>I(s)==="not_started"),t=r.filter(s=>I(s)==="finished"),l=(s,m)=>e.jsxs("div",{className:"border-l-4 border-soft-grey hover:border-turf transition-colors",children:[e.jsxs("div",{className:"bg-rough/20 px-4 py-2 flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-semibold text-fairway font-display flex items-center gap-2",children:[F?"Group":s.teetime,e.jsx("span",{className:"text-xs text-charcoal/50 font-primary font-normal",children:v==="indoor"&&s.hitting_bay?`· Bay ${s.hitting_bay}`:`· Start ${s.start_hole}`})]}),m]}),e.jsx("div",{className:"divide-y divide-soft-grey/50",children:s.participants.map(p=>e.jsxs("div",{className:"px-4 py-2 flex items-center justify-between",children:[e.jsx("h5",{className:"text-xs md:text-sm font-medium text-fairway font-primary",children:h(p)}),C(p.position_name)&&e.jsx(A,{className:"w-3 h-3 text-turf"})]},p.id))})]},s.id);return e.jsxs("div",{className:"space-y-6",children:[c.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-fairway mb-3 font-primary flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-coral"}),"On Course",e.jsxs("span",{className:"text-charcoal/50 font-normal",children:["(",c.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:c.map(s=>{const m=X(s);return l(s,e.jsxs("span",{className:"text-xs text-coral font-semibold font-primary",children:["Hole ",m]}))})})]}),n.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-fairway mb-3 font-primary flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-charcoal/40"}),"Waiting to Start",e.jsxs("span",{className:"text-charcoal/50 font-normal",children:["(",n.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:n.map(s=>l(s))})]}),t.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-fairway mb-3 font-primary flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-turf"}),"Finished",e.jsxs("span",{className:"text-charcoal/50 font-normal",children:["(",t.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:t.map(s=>l(s,e.jsx("span",{className:"text-xs text-turf font-medium font-primary",children:"Done"})))})]}),r.length===0&&e.jsx("div",{className:"text-center py-6 text-charcoal/50 text-sm font-primary",children:"No other groups in this competition."})]})})()]}),b&&e.jsx(xe,{isOpen:P,onClose:()=>R(!1),competitionId:parseInt(N),currentGroupSize:(d==null?void 0:d.participants.length)||0,maxGroupSize:4,mode:"add_to_existing",currentGroupMembers:((g=a==null?void 0:a.group)==null?void 0:g.players)||[],onSuccess:()=>{S==null||S()}}),e.jsx(q,{open:y.open,onOpenChange:r=>_(c=>({...c,open:r})),url:y.url,title:y.title,description:"Share this QR code or link with your group members to get them to the scorecard"})]}):e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-fairway font-display",children:"Tee Times"}),e.jsxs("div",{className:"text-xs md:text-sm text-turf font-primary",children:[(i==null?void 0:i.length)||0," tee times"]})]}),j?e.jsx("div",{className:"p-4 text-charcoal font-primary",children:"Loading tee times..."}):!i||i.length===0?e.jsx("div",{className:"text-center py-6 md:py-8 text-soft-grey text-sm font-primary",children:"No tee times scheduled for this competition yet."}):e.jsx("div",{className:"space-y-6",children:i.map(r=>{const c=I(r),n=X(r),t=c==="playing"?"border-coral":c==="finished"?"border-turf":"border-soft-grey";return e.jsxs("div",{className:`border-l-4 ${t}`,children:[e.jsx("div",{className:"bg-rough/20 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-base md:text-lg font-semibold text-fairway font-display flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 md:h-5 md:w-5 text-turf"}),r.teetime,e.jsx("span",{className:"text-xs md:text-sm text-turf font-primary font-medium",children:v==="indoor"&&r.hitting_bay?`· Bay ${r.hitting_bay}`:`· Hole ${r.start_hole}`})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[c==="playing"&&e.jsxs("span",{className:"text-xs text-coral font-semibold font-primary flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3"}),"Hole ",n]}),c==="finished"&&e.jsxs("span",{className:"text-xs text-turf font-medium font-primary flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),"Done"]}),c==="not_started"&&e.jsxs("span",{className:"text-xs text-charcoal/50 font-primary flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),"Waiting"]}),e.jsx("button",{onClick:()=>_({open:!0,url:Y(parseInt(N),r.id),title:`Tee Time ${r.teetime}`}),className:"p-1.5 text-turf hover:text-fairway hover:bg-turf/10 rounded-lg transition-colors",title:"Share tee time",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsxs("div",{className:"text-xs md:text-sm text-turf font-primary",children:[r.participants.length," players"]})]})]})}),r.participants.length===0?e.jsx("div",{className:"text-center py-4 text-soft-grey text-sm font-primary",children:"No participants assigned to this tee time yet."}):e.jsx("div",{className:"divide-y divide-soft-grey",children:r.participants.map(l=>{const s=ne(l.score||[],r.pars||[]),m=s.holesPlayed>0;return e.jsxs(oe,{to:`/player/competitions/${N}/tee-times/${r.id}`,className:"px-4 py-3 flex items-center justify-between hover:bg-rough hover:bg-opacity-20 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h5",{className:"text-sm md:text-base font-medium text-fairway font-primary truncate",children:h(l)}),x&&l.handicap_index!==void 0&&e.jsxs("div",{className:"text-xs text-charcoal/50 mt-0.5",children:["HCP ",l.handicap_index.toFixed(1)]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[m&&s.isValidRound&&e.jsx("span",{className:`text-sm font-semibold ${E(s.relativeToPar)}`,children:D(s.relativeToPar)}),C(l.position_name)&&e.jsx(A,{className:"w-4 h-4 text-turf"})]})]},l.id)})})]},r.id)})}),e.jsx(q,{open:y.open,onOpenChange:r=>_(c=>({...c,open:r})),url:y.url,title:y.title,description:"Scan to view this tee time group"})]})}function ge({teamResults:i,leaderboardLoading:j,individualResults:N,isRoundView:v=!1,onParticipantClick:o}){const[d,w]=H.useState("all"),[k,x]=H.useState(new Set),F=a=>{x(h=>{const f=new Set(h);return f.has(a)?f.delete(a):f.add(a),f})},S=i==null?void 0:i.filter(a=>d==="finished"?a.status==="FINISHED":!0),P=a=>N?N.filter(f=>f.participant.team_name===a).sort((f,b)=>{const g=f.participant.score.includes(-1),r=b.participant.score.includes(-1),c=f.holesPlayed>0,n=b.holesPlayed>0,t=c&&!g,l=n&&!r,s=c&&g,m=n&&r,p=!c,u=!n;return t&&!l?-1:!t&&l?1:s&&u?-1:p&&m?1:t&&l?f.relativeToPar-b.relativeToPar:0}):[],R=a=>{const h=a.participant.score.includes(-1),f=a.participant.is_locked;return a.holesPlayed>0?f&&!h?"FINISHED":"IN_PROGRESS":"NOT_STARTED"},y=a=>{const h=R(a);return h==="NOT_STARTED"?a.startTime?a.startTime:"TBD":h==="FINISHED"?"F":a.holesPlayed.toString()},_=e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-fairway font-display",children:"Team Results"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w("all"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${d==="all"?"bg-coral text-scorecard":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>w("finished"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${d==="finished"?"bg-coral text-scorecard":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Only Finished"})]}),j?e.jsx("div",{className:"flex items-center justify-center py-8 md:py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-coral border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-charcoal font-primary",children:"Loading team results..."})]})}):!i||i.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("h3",{className:"text-lg font-semibold text-charcoal font-display mb-2",children:"No Results Yet"}),e.jsx("p",{className:"text-soft-grey font-primary",children:"Team results will appear here once scores are submitted."})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between pb-2 mb-2 pr-3 border-b border-soft-grey text-xs text-charcoal/50 uppercase tracking-wide",children:[e.jsx("div",{className:"flex-1",children:"Team"}),e.jsxs("div",{className:"flex items-center gap-4 text-right",children:[e.jsx("div",{className:"w-14",children:"To Par"}),e.jsx("div",{className:"w-10",children:"Pts"})]})]}),e.jsx("div",{className:"divide-y divide-soft-grey",children:S==null?void 0:S.map((a,h)=>{const f=h===0&&a.status!=="NOT_STARTED",b=h<=2&&a.status!=="NOT_STARTED",g=a.status!=="NOT_STARTED",r=P(a.teamName),c=k.has(a.teamId),n=f?"border-l-4 border-l-coral bg-coral/5":b?"border-l-4 border-l-turf":g?"border-l-4 border-l-charcoal/20":"";return e.jsxs("div",{className:`${n} ${g?"":"opacity-60"}`,children:[e.jsxs("button",{onClick:()=>g&&r.length>0&&F(a.teamId),className:`w-full flex items-center justify-between py-3 pr-3 text-left ${g&&r.length>0?"hover:bg-gray-50/50 cursor-pointer":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[g&&r.length>0?e.jsx("svg",{className:`w-4 h-4 text-charcoal/30 transition-transform flex-shrink-0 ${c?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}):e.jsx("div",{className:"w-4"}),e.jsx("span",{className:`text-base font-bold w-5 flex-shrink-0 ${f?"text-coral":b?"text-turf":g?"text-charcoal":"text-soft-grey"}`,children:h+1}),e.jsx("span",{className:"text-base font-semibold text-charcoal font-display truncate",children:a.teamName})]}),e.jsx("div",{className:"flex items-center gap-4 text-right flex-shrink-0",children:a.status==="NOT_STARTED"?e.jsx("span",{className:"text-sm text-soft-grey",children:"—"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-14 text-base font-bold font-display ${a.totalRelativeScore!==null?E(a.totalRelativeScore):"text-charcoal"}`,children:a.totalRelativeScore!==null?D(a.totalRelativeScore):"-"}),e.jsx("div",{className:`w-10 text-base font-bold font-display ${f?"text-coral":b?"text-turf":"text-charcoal"}`,children:a.teamPoints??"-"})]})})]}),c&&r.length>0&&e.jsxs("div",{className:"pl-7 pr-4 pb-3 bg-gray-50/50",children:[a.totalShots&&e.jsxs("div",{className:"text-xs text-charcoal/50 mb-2",children:["Total: ",a.totalShots," shots"]}),e.jsx("div",{className:"divide-y divide-soft-grey/30",children:r.map((t,l)=>{const s=R(t),m=y(t),p=t.participant.score.includes(-1);return e.jsxs("button",{onClick:u=>{u.stopPropagation(),o==null||o(t.participant.id)},className:`w-full flex items-center justify-between py-2 transition-colors text-left ${s!=="NOT_STARTED"&&o?"hover:bg-gray-50 cursor-pointer":"cursor-default"}`,disabled:!o||s==="NOT_STARTED",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"text-xs text-charcoal/30 w-4",children:l+1}),e.jsx("span",{className:`font-medium font-primary text-sm ${s!=="NOT_STARTED"?"text-charcoal":"text-soft-grey"}`,children:t.participant.player_name?`${t.participant.player_name} (${t.participant.position_name})`:t.participant.position_name})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm",children:s==="NOT_STARTED"?e.jsx("span",{className:"text-charcoal/40",children:m}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-charcoal/60 w-6 text-center",children:m}),e.jsx("span",{className:`font-bold w-8 text-right ${p?"text-charcoal/40":E(t.relativeToPar)}`,children:p?"-":D(t.relativeToPar)})]})})]},t.participant.id)})})]})]},a.teamId)})})]})]});return v?e.jsx("div",{className:"h-full overflow-y-auto bg-scorecard",children:e.jsx("div",{className:"p-4 md:p-6",children:_})}):_}export{K as C,ue as L,Ne as P,ge as T};
